!function(e,t,r){"use strict";function n(e,r){return t.equals(e.length,r.length)?e>r:e.length>r.length}function a(e){var t=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!t||4!==t.length)throw new Error("Invalid state ref '"+e+"'");return{state:t[1],paramExpr:t[3]||null}}function c(){var e={prefixStateName:null,template:"bootstrap3",templateUrl:null,includeAbstract:!1};this.setOptions=function(r){t.extend(e,r)},this.$get=["$state","$stateParams","$rootScope",function(t,c,i){var s=i;i.$on("$viewContentLoaded",function(e){n(e.targetScope.$id,s.$id)&&(s=e.targetScope)});var u=function(e){var t=e.parent||(/^(.+)\.[^.]+$/.exec(e.name)||[])[1];return t},o=function(r,n){for(var i,u,o=a(n),l=0,p=r.length;p>l;l+=1)if(r[l].name===o.state)return;i=t.get(o.state),i["abstract"]&&!e.includeAbstract||i.ncyBreadcrumb&&i.ncyBreadcrumb.skip||(o.paramExpr&&(u=s.$eval(o.paramExpr)),i.ncyBreadcrumbLink=t.href(o.state,u||c||{}),r.unshift(i))},l=function(e){var r=a(e),n=t.get(r.state);if(n.ncyBreadcrumb&&n.ncyBreadcrumb.parent){var c="function"==typeof n.ncyBreadcrumb.parent,i=c?n.ncyBreadcrumb.parent(s):n.ncyBreadcrumb.parent;if(i)return i}return u(n)};return{getTemplate:function(t){return e.templateUrl?null:t[e.template]?t[e.template]:e.template},getTemplateUrl:function(){return e.templateUrl},getStatesChain:function(r){for(var n=[],a=t.$current.self.name;a;a=l(a))if(o(n,a),r&&n.length)return n;return e.prefixStateName&&o(n,e.prefixStateName),n},getLastStep:function(){var e=this.getStatesChain(!0);return e.length?e[0]:r},$getLastViewScope:function(){return s}}}]}function i(e,r,n){var a={bootstrap2:'<ul class="breadcrumb"><li ng-repeat="step in steps" ng-switch="$last || !!step.abstract" ng-class="{active: $last}"><a ng-switch-when="false" href="{{step.ncyBreadcrumbLink}}">{{step.ncyBreadcrumbLabel}}</a> <span ng-switch-when="true">{{step.ncyBreadcrumbLabel}}</span><span class="divider" ng-hide="$last">/</span></li></ul>',bootstrap3:'<ol class="breadcrumb"><li ng-repeat="step in steps" ng-class="{active: $last}" ng-switch="$last || !!step.abstract"><a ng-switch-when="false" href="{{step.ncyBreadcrumbLink}}">{{step.ncyBreadcrumbLabel}}</a> <span ng-switch-when="true">{{step.ncyBreadcrumbLabel}}</span></li></ol>'};return{restrict:"AE",replace:!0,scope:{},template:r.getTemplate(a),templateUrl:r.getTemplateUrl(),link:{post:function(a){var c=[],i=function(){l(c);var n=r.$getLastViewScope();a.steps=r.getStatesChain(),t.forEach(a.steps,function(t){if(t.ncyBreadcrumb&&t.ncyBreadcrumb.label){var r=e(t.ncyBreadcrumb.label);t.ncyBreadcrumbLabel=r(n),o(c,r,n,t)}else t.ncyBreadcrumbLabel=t.name})};n.$on("$viewContentLoaded",function(){i()}),i()}}}}function s(e,t,r){return{restrict:"A",scope:{},template:"{{ncyBreadcrumbLabel}}",compile:function(n,a){var c=n.attr(a.$attr.ncyBreadcrumbLast);return c&&n.html(c),{post:function(n){var a=[],c=function(){l(a);var r=t.$getLastViewScope(),c=t.getLastStep();if(c)if(n.ncyBreadcrumbLink=c.ncyBreadcrumbLink,c.ncyBreadcrumb&&c.ncyBreadcrumb.label){var i=e(c.ncyBreadcrumb.label);n.ncyBreadcrumbLabel=i(r),o(a,i,r,n)}else n.ncyBreadcrumbLabel=c.name};r.$on("$viewContentLoaded",function(){c()}),c()}}}}}var u=function(e){if(e.expressions)return e.expressions;var r=[];return t.forEach(e.parts,function(e){t.isFunction(e)&&r.push(e.exp)}),r},o=function(e,r,n,a){t.forEach(u(r),function(t){var c=n.$watch(t,function(){a.ncyBreadcrumbLabel=r(n)});e.push(c)})},l=function(e){t.forEach(e,function(e){e()}),e=[]};i.$inject=["$interpolate","$breadcrumb","$rootScope"],s.$inject=["$interpolate","$breadcrumb","$rootScope"],t.module("ncy-angular-breadcrumb",["ui.router.state"]).provider("$breadcrumb",c).directive("ncyBreadcrumb",i).directive("ncyBreadcrumbLast",s)}(window,window.angular),function(){"use strict";angular.module("wu.staticGmap",[]).controller("StaticGmapCtrl",function(){var e="//maps.googleapis.com/maps/api/staticmap?",t=["color","label","size"];this.makeMarkerStrings=function(e){return e.map(function(e){var r=Object.keys(e).map(function(r){return t.indexOf(r)>-1?r+":"+e[r]+"|":void 0}).join("");return r+e.coords.join(",")})},this.buildSourceString=function(t,r){var n;r&&(angular.isArray(r)||(r=[r]),n=this.makeMarkerStrings(r));var a=Object.keys(t).map(function(e){return"markers"===e&&n?Object.keys(n).map(function(e){return"markers="+encodeURIComponent(n[e])}).join("&"):"$"!==e[0]&&"alt"!==e?encodeURIComponent(e)+"="+encodeURIComponent(t[e]):void 0});return e+a.reduce(function(e,t){return e?void 0!==t?e+"&"+t:e:t},"")}}).directive("staticGmap",["$parse",function(e){return{template:'<img alt="Google Map">',replace:!0,restrict:"E",controller:"StaticGmapCtrl",scope:!0,link:function(t,r,n,a){var c=r[0],i=e(n.markers)(t);if(!n.sensor)throw new Error("The `sensor` attribute is required.");if(!n.size)throw new Error("The `size` attribute is required.");var s=n.size.split("x");if(2!==s.length)throw new Error("Size must be specified as `wxh`.");c.width=parseInt(s[0],10),c.height=parseInt(s[1],10),c.src=a.buildSourceString(n,i)}}}])}();